<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">

    <script>
        function copyURL(id) {
            const copyText = document.getElementById(id);
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
            alert("URL copied!");
        }
    </script>
</head>

<body>
<h2>URL Shortener</h2>

{% for msg in get_flashed_messages() %}
<p class="flash">{{ msg }}</p>
{% endfor %}

<form method="POST">
    <input name="url" placeholder="Enter long URL" required>
    <button type="submit">Shorten</button>
</form>

{% if short_url %}
<div class="short-url">
    <input type="text" id="latestShortUrl" value="{{ short_url }}" readonly>
    <button class="copy-btn" onclick="copyURL('latestShortUrl')">Copy</button>
</div>
{% endif %}

<h3>Previous URLs</h3>
<ul>
{% for url in urls %}
    <li>
        <span>{{ url.original_url }} â†’ {{ request.host_url }}{{ url.short_code }}</span>
        <input type="text" id="copy{{ loop.index }}" value="{{ request.host_url }}{{ url.short_code }}" readonly style="display:none;">
        <button class="copy-btn" onclick="copyURL('copy{{ loop.index }}')">Copy</button>
    </li>
{% endfor %}
</ul>

<a href="{{ url_for('logout') }}">Logout</a>

</body>
</html>
